# Mail storage configuration for PSFX Suite

# Mail location - Maildir format under /var/mail
# Format: maildir:/var/mail/domain/user
mail_location = maildir:/var/mail/%d/%n:LAYOUT=fs

# Namespace configuration
namespace inbox {
  inbox = yes
  separator = /

  # Standard mailboxes
  mailbox Drafts {
    special_use = \Drafts
    auto = subscribe
  }
  mailbox Sent {
    special_use = \Sent
    auto = subscribe
  }
  mailbox "Sent Messages" {
    special_use = \Sent
  }
  mailbox Trash {
    special_use = \Trash
    auto = subscribe
  }
  mailbox Junk {
    special_use = \Junk
    auto = subscribe
  }
  mailbox Archive {
    special_use = \Archive
    auto = no
  }
}

# Mail user/group
mail_uid = dovecot
mail_gid = dovecot

# Allow dovecot system user (UID 90) for virtual mailboxes
first_valid_uid = 1
first_valid_gid = 1

# Allow clients to set mailbox metadata
mail_attribute_dict = file:%h/dovecot-attributes

# Mail process count limits (for scale)
mail_max_userip_connections = 20
